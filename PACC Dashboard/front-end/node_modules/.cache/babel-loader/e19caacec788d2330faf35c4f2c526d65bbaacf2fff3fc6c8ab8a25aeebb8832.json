{"ast":null,"code":"import { createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-76acd2c2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container-fluid\"\n};\nconst _hoisted_2 = {\n  class: \"py-5 container-fluid\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-12\"\n};\nconst _hoisted_5 = {\n  class: \"py-2 container-fluid\"\n};\nconst _hoisted_6 = {\n  class: \"row\"\n};\nconst _hoisted_7 = {\n  class: \"col-12\"\n};\nconst _hoisted_8 = {\n  class: \"py-2 container-fluid\"\n};\nconst _hoisted_9 = {\n  class: \"row\"\n};\nconst _hoisted_10 = {\n  class: \"col-12\"\n};\nconst _hoisted_11 = {\n  class: \"py-2 container-fluid\"\n};\nconst _hoisted_12 = {\n  class: \"row\"\n};\nconst _hoisted_13 = {\n  class: \"col-12\"\n};\nconst _hoisted_14 = {\n  class: \"create-project-button-container\"\n};\nconst _hoisted_15 = [\"disabled\"];\nconst _hoisted_16 = {\n  class: \"last-submitted-data-container\"\n};\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"Last Submitted Data\", -1 /* HOISTED */));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createVNode($setup[\"ModelselectBox\"], {\n    \"onUpdate:modelValue\": $setup.modelIdSelected\n  })])])]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createVNode($setup[\"DatasetselectBox\"], {\n    \"onUpdate:modelValue\": $setup.datasetSelected\n  })])])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createVNode($setup[\"HyperparameterselectBox\"], {\n    \"onUpdate:modelValue\": $setup.hyperparametersSelected\n  })])])]), _createElementVNode(\"div\", _hoisted_11, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createVNode($setup[\"NodeselectBox\"], {\n    modelValue: $setup.projectData.nodes,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.projectData.nodes = $event)\n  }, null, 8 /* PROPS */, [\"modelValue\"])])])]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"button\", {\n    class: \"create-project-button\",\n    onClick: $setup.createProject,\n    disabled: $setup.isCreatingProject\n  }, _toDisplayString($setup.isCreatingProject ? \"Creating...\" : \"Create Project\"), 9 /* TEXT, PROPS */, _hoisted_15)]), _createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _createElementVNode(\"pre\", null, _toDisplayString($setup.stringifyData($setup.lastSubmittedData)), 1 /* TEXT */)])]);\n}","map":{"version":3,"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","$setup","modelIdSelected","_hoisted_5","_hoisted_6","_hoisted_7","datasetSelected","_hoisted_8","_hoisted_9","_hoisted_10","hyperparametersSelected","_hoisted_11","_hoisted_12","_hoisted_13","modelValue","projectData","nodes","_cache","$event","_hoisted_14","onClick","createProject","disabled","isCreatingProject","_hoisted_15","_hoisted_16","_hoisted_17","_toDisplayString","stringifyData","lastSubmittedData"],"sources":["D:\\develop\\vue-flask-dashboard\\front-end\\src\\views\\Tables.vue"],"sourcesContent":["<script setup>\r\nimport { reactive, ref, computed, watch } from \"vue\";\r\nimport { useRouter } from 'vue-router';\r\nimport { useStore } from \"vuex\";\r\nimport ModelselectBox from \"./components/ModelSelector.vue\";\r\nimport DatasetselectBox from \"./components/DatasetSelector.vue\";\r\nimport HyperparameterselectBox from \"./components/HyperparameterSelector.vue\";\r\nimport NodeselectBox from \"./components/NodeSelector.vue\";\r\nimport axios from \"axios\";\r\n\r\nconst store = useStore();\r\nconst router = useRouter(); // Instantiate the router\r\nconst isCreatingProject = ref(false);\r\nconst creationSuccess = ref(false); // New ref to track creation success\r\nconst authToken = computed(() => store.state.authToken);\r\n\r\nconst projectData = reactive({\r\n  model: {}, // Initially an object, later to be just a string of model_id\r\n  dataset: {}, // Initially an object, later to be just a string of dataset_id\r\n  hyperparameters: {}, // Already in the desired format\r\n  nodes: [], // Initially an array of objects, later to be an array of node names\r\n});\r\n\r\n\r\n\r\nwatch(\r\n  projectData.hyperparameters,\r\n  (newVal) => {\r\n    console.log(\"Hyperparameters updated:\", newVal);\r\n  },\r\n  { deep: true },\r\n);\r\n\r\nwatch(creationSuccess, (newValue) => {\r\n  if (newValue) {\r\n    alert(\"프로젝트가 생성되었습니다.\"); // Alert the user about success\r\n    creationSuccess.value = false; // Reset the creation success state\r\n    router.push('/dashboard-default'); // Redirect to the Dashboard page\r\n  }\r\n});\r\n\r\n// const handleSelectedNodeChange = (selectedNode) => {\r\n//   const index = projectData.nodes.findIndex(node => node.id === selectedNode.id);\r\n//   if (index > -1) {\r\n//     // Node is already selected, remove it\r\n//     projectData.nodes.splice(index, 1);\r\n//   } else {\r\n//     // Node is not selected, add it\r\n//     projectData.nodes.push(selectedNode);\r\n//   }\r\n// };\r\n\r\nconst prepareDataForSubmission = () => {\r\n  return {\r\n    model: projectData.model.model_id,\r\n    dataset: projectData.dataset.dataset_id,\r\n    hyperparameters: {\r\n      ...projectData.hyperparameters,\r\n      optimizer: projectData.hyperparameters.optimizer,\r\n      lossFunction: projectData.hyperparameters.lossFunction,\r\n    },\r\n    nodes: projectData.nodes.map((node) => node.name),\r\n  };\r\n};\r\n\r\nconst hyperparametersSelected = (newHyperparameters) => {\r\n  projectData.hyperparameters = {\r\n    ...projectData.hyperparameters,\r\n    ...newHyperparameters,\r\n  };\r\n};\r\n\r\n// Method to send data to backend\r\nconst createProject = async () => {\r\n  try {\r\n    isCreatingProject.value = true;\r\n    const formattedData = prepareDataForSubmission(); // 전달 데이터 형식 변경\r\n    lastSubmittedData.value = formattedData;\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${authToken.value}`,\r\n      },\r\n    };\r\n\r\n    const response = await axios.post(\r\n      \"http://localhost:5000/api/create-project\",\r\n      formattedData,\r\n      config,\r\n    );\r\n\r\n    // 프로젝트 생성이 성공했다면, 노드 정보 업데이트\r\n    if (response && response.status === 200) {\r\n      console.log(\"Project created successfully:\", response.data);\r\n      // 프로젝트 생성 후 노드 정보 새로고침\r\n      await store.dispatch(\"fetchNodes\");\r\n      creationSuccess.value = true; // Indicate that the project was created\r\n      // 성공 메시지 처리 또는 사용자 인터페이스 업데이트 등의 추가적인 처리를 여기에 추가할 수 있습니다.\r\n    }\r\n    console.log(response.data);\r\n    // Handle successful project creation (e.g., redirect or show message)\r\n  } catch (error) {\r\n    console.error(\"Failed to create project:\", error);\r\n    // Handle errors (e.g., show error message)\r\n  } finally {\r\n    isCreatingProject.value = false;\r\n  }\r\n};\r\n\r\nconst modelIdSelected = (modelId) => {\r\n  if (modelId) {\r\n    const fullModel = store.state.models.find(\r\n      (model) => model.model_id === modelId,\r\n    );\r\n    if (fullModel) {\r\n      projectData.model = fullModel; // Assign the full model object\r\n    } else {\r\n      console.error(\"Model not found!\");\r\n    }\r\n  }\r\n};\r\n\r\nconst datasetSelected = (datasetId) => {\r\n  projectData.dataset = { dataset_id: datasetId };\r\n};\r\n\r\nconst stringifyData = (value) => {\r\n  return JSON.stringify(value, null, 2); // Pretty print JSON\r\n};\r\n\r\nconst lastSubmittedData = ref(null); // 백엔드로 마지막으로 전송된 데이터를 저장\r\n</script>\r\n\r\n<template>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"py-5 container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <ModelselectBox @update:modelValue=\"modelIdSelected\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"py-2 container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <DatasetselectBox @update:modelValue=\"datasetSelected\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"py-2 container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <HyperparameterselectBox\r\n            @update:modelValue=\"hyperparametersSelected\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"py-2 container-fluid\">\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <NodeselectBox v-model=\"projectData.nodes\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"create-project-button-container\">\r\n      <button\r\n        class=\"create-project-button\"\r\n        @click=\"createProject\"\r\n        :disabled=\"isCreatingProject\"\r\n      >\r\n        {{ isCreatingProject ? \"Creating...\" : \"Create Project\" }}\r\n      </button>\r\n    </div>\r\n    <div class=\"last-submitted-data-container\">\r\n      <h3>Last Submitted Data</h3>\r\n      <pre>{{ stringifyData(lastSubmittedData) }}</pre>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n/* ... other styles ... */\r\n\r\n/* Add padding to the bottom of the container to push the footer down */\r\n.container-fluid {\r\n  padding-bottom: 50px; /* Adjust the value as needed to create space above the footer */\r\n}\r\n\r\n/* Adjust the styling of the button and its container */\r\n.create-project-button-container {\r\n  text-align: right; /* Aligns the button to the right */\r\n  padding-top: 20px; /* Adds space above the button */\r\n  padding-bottom: 20px; /* Adds space below the button, above the footer */\r\n}\r\n\r\n.create-project-button {\r\n  padding: 10px 30px; /* Larger padding for a larger button */\r\n  margin-top: 20px; /* Adds space above the button */\r\n  margin-bottom: 40px; /* Adds space below the button */\r\n  /* Other styling remains unchanged */\r\n}\r\n\r\n.last-submitted-data-container {\r\n  margin-top: 20px;\r\n  background-color: #fbfafa;\r\n  padding: 15px;\r\n  border-radius: 5px;\r\n}\r\n\r\nbutton {\r\n  border-radius: 5px; /* Adjust the pixel value to control the roundness */\r\n  background-color: #90ee90; /* This is a light green color */\r\n  border: none; /* Removes the default border */\r\n  padding: 10px 20px; /* Adds some padding inside the button */\r\n  color: rgb(0, 0, 0); /* Changes the text color */\r\n  font-size: 16px; /* Adjust the font size as needed */\r\n  cursor: pointer; /* Changes the cursor to a pointer when hovering over the button */\r\n  transition: background-color 0.3s; /* Smooth transition for background color */\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #76c893; /* Slightly darker green color for the hover state */\r\n}\r\n/* ... */\r\n</style>\r\n"],"mappings":";;;EAqIOA,KAAK,EAAC;AAAiB;;EACrBA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAQ;;EAMlBA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAQ;;EAMlBA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAQ;;EAQlBA,KAAK,EAAC;AAAsB;;EAC1BA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAQ;;EAMlBA,KAAK,EAAC;AAAiC;oBAxKhD;;EAiLSA,KAAK,EAAC;AAA+B;iEACxCC,mBAAA,CAA4B,YAAxB,qBAAmB;;uBA7C3BC,mBAAA,CAgDM,OAhDNC,UAgDM,GA/CJF,mBAAA,CAMM,OANNG,UAMM,GALJH,mBAAA,CAIM,OAJNI,UAIM,GAHJJ,mBAAA,CAEM,OAFNK,UAEM,GADJC,YAAA,CAAuDC,MAAA;IAAtC,qBAAiB,EAAEA,MAAA,CAAAC;EAAe,G,OAKzDR,mBAAA,CAMM,OANNS,UAMM,GALJT,mBAAA,CAIM,OAJNU,UAIM,GAHJV,mBAAA,CAEM,OAFNW,UAEM,GADJL,YAAA,CAAyDC,MAAA;IAAtC,qBAAiB,EAAEA,MAAA,CAAAK;EAAe,G,OAK3DZ,mBAAA,CAQM,OARNa,UAQM,GAPJb,mBAAA,CAMM,OANNc,UAMM,GALJd,mBAAA,CAIM,OAJNe,WAIM,GAHJT,YAAA,CAEEC,MAAA;IADC,qBAAiB,EAAEA,MAAA,CAAAS;EAAuB,G,OAMnDhB,mBAAA,CAMM,OANNiB,WAMM,GALJjB,mBAAA,CAIM,OAJNkB,WAIM,GAHJlB,mBAAA,CAEM,OAFNmB,WAEM,GADJb,YAAA,CAA6CC,MAAA;IAnKvDa,UAAA,EAmKkCb,MAAA,CAAAc,WAAW,CAACC,KAAK;IAnKnD,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAmKkCjB,MAAA,CAAAc,WAAW,CAACC,KAAK,GAAAE,MAAA;iDAK/CxB,mBAAA,CAQM,OARNyB,WAQM,GAPJzB,mBAAA,CAMS;IALPD,KAAK,EAAC,uBAAuB;IAC5B2B,OAAK,EAAEnB,MAAA,CAAAoB,aAAa;IACpBC,QAAQ,EAAErB,MAAA,CAAAsB;sBAERtB,MAAA,CAAAsB,iBAAiB,2DA9K5BC,WAAA,E,GAiLI9B,mBAAA,CAGM,OAHN+B,WAGM,GAFJC,WAA4B,EAC5BhC,mBAAA,CAAiD,aAAAiC,gBAAA,CAAzC1B,MAAA,CAAA2B,aAAa,CAAC3B,MAAA,CAAA4B,iBAAiB,kB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}